<main class="container m-auto p-2">
  <form (submit)="handleSubmit($event)">
    <div class="flex flex-wrap">
      <div
        class="my-2 px-2 basis-full sm:basis-6/12 lg:basis-4/12 xl:basis-3/12"
        *ngFor="let category of categories; let i = index"
      >
        <div class="border border-black h-full w-full p-2">
          <h3 class="flex items-center">
            <label for="{{ i }}">
              <input
                id="{{ i }}"
                type="checkbox"
                (change)="handleCategoryChange(i)"
                [checked]="category.checkAll"
                class="mr-1 scale-125"
              />

              <span class="font-bold">{{ category.name }}</span>
            </label>
          </h3>

          <ul>
            <li
              class="ml-3 flex items-center"
              *ngFor="let subCategory of category.subCategories; let j = index"
            >
              <label for="{{ i + '_' + j }}">
                <input
                  id="{{ i + '_' + j }}"
                  type="checkbox"
                  [checked]="subCategory.checked"
                  (change)="handleSubCategoryChange(i, subCategory.name)"
                  class="mr-1 scale-125"
                />

                <span>{{ subCategory.name }}</span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="text-right">
      <button
        type="submit"
        class="border rounded bg-cyan-400 text-white py-2 px-5"
      >
        Submit
      </button>
    </div>
  </form>
</main>
